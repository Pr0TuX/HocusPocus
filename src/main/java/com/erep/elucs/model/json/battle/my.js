// ==UserScript==
// @author   	xxxxExxxx 
// @name        zzzzEzzzz-Chrome
// @namespace   yyyyEyyyy
// @version		5
// @include		http://www.erepublik.com/*/military/battlefield/*
// @description zzzzEzzzz
// @downloadURL http://userscripts.org/scripts/source/158459.user.js
// @updateURL	http://userscripts.org/scripts/source/158459.meta.js
// @require		http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
// ==/UserScript==

//Chrome 5 = Get data from battle-stats.
//Chrome 4 = Solved bug with military unit.
//Chrome 3 = Solved bugs after template change.
//Chrome 2 = Solved bug if My Damage is 0.

var VERSIONo = "Chrome 5";

eval(function (p, a, c, k, e, d) {
    e = function (c) {
        return(c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36))
    };
    while (c--) {
        if (k[c]) {
            p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c])
        }
    }
    return p
}('4 B=1;4 j="A";4 z="y://C.D.8/x?F="+j;$=0=0.E(H);u(w 7==="v")7=m;m.t("G",3(){0(\'#U\').o({\'i\':\'1\',\'e\':\'#f\'});0(\'#T\').o({\'i\':\'1\',\'e\':\'#f\'});S();9(5);g()},V);3 g(){a{4 h=7.I[\'W\'];4 k="r://s.l.8/q/X/R/"+h}b(2){d("Q: "+2.c)}0.p(k,3(6){a{L=0(".K J",6).n()}b(2){d("M: "+2.c)}})}5="r://s.l.8/q";3 9(5){0.p(5,3(6){a{N=0("#P O",6).n()}b(2){d("9: "+2.c)}})}', 60, 60, 'jQuery||err|function|var|urlDO|data|unsafeWindow|com|getDO|try|catch|message|alert|color|fff|militaryUnit|citID|opacity|formKey|urlProfile|erepublik|window|html|css|get|en|http|www|addEventListener|if|undefined|typeof|formResponse|https|URLGoogleForm|dGhVWVpPbkVRWVphSTIwVnktVWYwZ2c6MQ|sendToSpread|spreadsheets|google|noConflict|formkey|DOMContentLoaded|true|SERVER_DATA|span|one_newspaper|military_unit|getProfile|daily_order|strong|orderContainer|href|profile|createReportButtons|red_domination|blue_domination|false|citizenId|citizen'.split('|')))

var rankar = {"Recruit": 1, "Private": 2, "Private *": 3, "Private **": 4, "Private ***": 5, "Corporal": 6, "Corporal *": 7, "Corporal **": 8, "Corporal ***": 9, "Sergeant": 10, "Sergeant *": 11, "Sergeant **": 12, "Sergeant ***": 13, "Lieutenant": 14, "Lieutenant *": 15, "Lieutenant **": 16, "Lieutenant ***": 17, "Captain": 18, "Captain *": 19, "Captain **": 20, "Captain ***": 21, "Major": 22, "Major *": 23, "Major **": 24, "Major ***": 25, "Commander": 26, "Commander *": 27, "Commander **": 28, "Commander ***": 29, "Lt Colonel": 30, "Lt Colonel *": 31, "Lt Colonel **": 32, "Lt Colonel ***": 33, "Colonel": 34, "Colonel *": 35, "Colonel **": 36, "Colonel ***": 37, "General": 38, "General *": 39, "General **": 40, "General ***": 41, "Field Marshal": 42, "Field Marshal *": 43, "Field Marshal **": 44, "Field Marshal ***": 45, "Supreme Marshal": 46, "Supreme Marshal *": 47, "Supreme Marshal **": 48, "Supreme Marshal ***": 49, "National Force": 50, "National Force *": 51, "National Force **": 52, "National Force ***": 53, "World Class Force": 54, "World Class Force *": 55, "World Class Force **": 56, "World Class Force ***": 57, "Legendary Force": 58, "Legendary Force *": 59, "Legendary Force **": 60, "Legendary Force ***": 61, "God of War": 62, "God of War *": 63, "God of War **": 64, "God of War ***": 65, "Recrut": 1, "Soldat": 2, "Soldat *": 3, "Soldat **": 4, "Soldat ***": 5, "Caporal": 6, "Caporal *": 7, "Caporal **": 8, "Caporal ***": 9, "Sergent": 10, "Sergent *": 11, "Sergent **": 12, "Sergent ***": 13, "Locotenent": 14, "Locotenent *": 15, "Locotenent **": 16, "Locotenent ***": 17, "Capitan": 18, "Capitan *": 19, "Capitan **": 20, "Capitan ***": 21, "Maior": 22, "Maior *": 23, "Maior **": 24, "Maior ***": 25, "Comandor": 26, "Comandor *": 27, "Comandor **": 28, "Comandor ***": 29, "Lt Colonel": 30, "Lt Colonel *": 31, "Lt Colonel **": 32, "Lt Colonel ***": 33, "Colonel": 34, "Colonel *": 35, "Colonel **": 36, "Colonel ***": 37, "General": 38, "General *": 39, "General **": 40, "General ***": 41, "Mareșal": 42, "Mareșal *": 43, "Mareșal **": 44, "Mareșal ***": 45, "Mareșal Suprem": 46, "Mareșal Suprem *": 47, "Mareșal Suprem **": 48, "Mareșal Suprem ***": 49, "Putere Națională": 50, "Putere Națională *": 51, "Putere Națională **": 52, "Putere Națională ***": 53, "Putere Mondială": 54, "Putere Mondială *": 55, "Putere Mondială **": 56, "Putere Mondială ***": 57, "Luptător de Legendă": 58, "Luptător de Legendă *": 59, "Luptător de Legendă **": 60, "Luptător de Legendă ***": 61, "Zeu al Războiului": 62, "Zeu al Războiului *": 63, "Zeu al Războiului **": 64, "Zeu al Războiului ***": 65 };

eval(function (p, a, c, k, e, d) {
    e = function (c) {
        return(c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36))
    };
    while (c--) {
        if (k[c]) {
            p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c])
        }
    }
    return p
}('q 1i(){c 1p=d("#S .2f .1q").s("R");c 1g=d(\'.1B a\').s("x").2B("/");c 2v=1g[1g.2o-1];c 39=2H.2m;c X=d("#3j .3i .2O .X H").n();c 1r=19.1a[\'2M\'];c F=d("#V #U .T .1w t p").n();f(F==0){c F="0"}c Z=2I.I.2m.2P.2Q();c 1O=19.1a[\'2W\'];c 1K=2R(d("#2S").n());c 23=d("#S .2f .1q");c y=23.s("x");c Y="u://1n.1J.1E/1N/2C/Y-2r/"+y.O(y.2c("/")+1);c 2b="u://1n.1J.1E/1N/3l/2b/"+y.O(y.2c("/")+1);c G,r=d(\'#2k\').s(\'R\');G=A(d(\'#2T\').n().1b().2U(/,/g,\'\'));f(2V r==\'2X\'||r.2o==0){r=d(\'#2k\').s(\'2J-R\').O(15).1b()}2L{r=r.O(15).1b()}c W=2N[r];c 1I=C.B(F/((C.B(C.B((1Z(W)+5)*(A(G)+2j)*0.2p)))*3));c 1H=19.1a[\'2Y\'];c 1G=d("#2Z 3h").n();c M=d("#3g H").n();c J=d("#3f H").n();M=A(M);J=A(J);c e=M+J;c o=d("#S .1B .3k b").n();f(e<11){c k=1}f(e>10&&e<22){c k=2}f(e>21&&e<33){c k=3}f(e>32&&e<44){c k=4}f(e>43&&e<3e){c k=5}f(e>3d&&e<38){c k=6}f(e>35&&e<34){c k=7}f(e>3a&&e<3c){c k=8}f(e>3b&&e<3m){c k=9}f(e>2q&&e<2u){c k=10}f(e>2s&&e<2y){c k=11}f(e>2F&&e<2A){c k=12}f(e>2D&&e<2t){c k=13}f(e>2x&&e<2E){c k=14}f(e>2G&&e<2w){c k=15}f(e>2z&&e<2K){c k=16}f(o<25){c z=1}f(o>24&&o<30){c z=2}f(o>29&&o<37){c z=3}f(o>36){c z=4}c 1P=C.B(C.B((1Z(W)+5)*(A(G)+2j)*0.2p)*3);c 1L=d("#V #U .T H").n();c 1C=d("#V #U .T .1w t b").n();f(4b==1){c u;c 1o=47+"&h.0.j="+X+"&h.1.j="+1p+"&h.2.j="+1r+"&h.4.j="+F+"&h.6.j="+1O+"&h.8.j="+1K+"&h.10.j="+Y+"&h.12.j="+G+"&h.14.j="+1I+"&h.16.j="+1H+"&h.18.j="+1G+"&h.20.j="+3n+"&h.22.j="+z+"&h.24.j="+k+"&h.25.j="+48+"&h.27.j="+1P+"&h.28.j="+o+"&h.29.j="+1L+"&h.31.j="+1C+"&h.32.j="+46+"&4a=4d";u=4c 4e();u.49("42",1o,3B);u.45(3A)}}q 1X(Z,1v,v,D){1V{17="3z";v=v||"";c Q=d(I.1Y("Q")).s({"2i":D,"L":D,"17":17,"3C":Z,"v":v});d.1e(1v,q(1c,w){d.1e(w 3D 3G?w:[w],q(i,2n){d(I.1Y("3F")).s({"3E":"3y","2i":1c,"L":D+"3x"+1c,"w":2n}).N(Q)})});Q.N(I.3r)}1Q(P){K("1X: "+P.2l+" "+D)}}q 3q(){1V{1S=d(\'<a 1f="m" x="#">1m!</a>\');1S.N(d(".2a E").1d(\'</E><E><t L="3p"></t>\')).1h("1k",1j);1T=d(\'<a 1f="m" x="#">1m!</a>\');1T.N(d("#2d").1d(\'</E><E><t L="3o"></t>\')).1h("1k",1j);d("#2d").l("3s","3t");d(".2a").l("3w","3v");d(".m").l("1z-1u",d("#1R 1y").l("1z-1u"));d(".m").l("3u",\'#3H\');d(".m").l("3I",\'3W\');d(".m").l("3V",\'3U\');d(".m").l("26-3X",\'3Y\');d(".m").l("26-41",\'40\');d(".m").l("1U",\'2h\');d(".m").l("3Z-1U",\'2h\');d(".m").l("1l",\'0.7\');d(".m").l("3T",\'0 3S\');d(".m").l("n-3M",\'#3L 1x 3K 1x\');d(".m:1A").l("1l",d("#1R 1y:1A").l("1l"));c 1D=\'<a 1f="1M" x="#">&1t;&1t; 1m &1s;&1s;</a>\';d([d("#3J"),d("#3N")]).1e(q(){d(3O).1d(1D).3R(".1M").1h("1k",2g)})}1Q(P){K("3Q: "+P.2l)}}c 1j=q(){K("1W");1i();2e 1F};c 2g=q(){K("1W 3P");1i();2e 1F};', 62, 263, '||||||||||||var|jQuery|TotalPoints|if||entry||single|bround|css|bs_report_button|text|level||function|ranks|attr|td|http|target|value|href|profileUrl|division|parseFloat|floor|Math|formName|tr|rDamage|str|strong|document|rightTotalPoints|alert|id|leftTotalPoints|appendTo|substr|err|form|title|large_sidebar|CHTable2|MyTable|myPersBox|rankl|eday|donate|path||||||||method||unsafeWindow|SERVER_DATA|trim|key|append|each|class|citIDArr|bind|getData|reportHandler|click|opacity|Report|www|url|citName|user_avatar|time|gt|lt|image|params|BHTable|0px|small|background|hover|user_info|kills|lastButton|com|false|currentregion10|fightingside10|hits0|erepublik|blueDomination|dmgTotal|bs_last_report|en|battle0|hitq7|catch|total_damage|jQueryreportButton|jQueryreportButton2|height|try|Reported|addForm|createElement|parseInt||||userLink|||font||||damage_aligner|profile|lastIndexOf|close_bstats|return|user_section|reportEndHandler|25px|name|400|rank_icon|message|location|val|length|005|98|items|109|143|110|citID|165|142|121|164|132|split|economy|131|154|120|153|window|parent|original|176|else|zoneElapsedTime|rankar|erpk_time|pathname|toString|encodeURIComponent|blue_domination|fighter_skill|replace|typeof|battleId|undefined|countryId|pvp_header|||||77|65|||66|locAll|76|87|88|54|55|right_campaign_points|left_campaign_points|h2|header_top|header|user_level|citizen|99|VERSIONo|bs_report_td2|bs_report_td|createReportButtons|body|right|15px|color|250px|top|_|hidden|post|null|true|action|instanceof|type|input|Array|FFFFFF|display|battle_end|1px|333333|shadow|battle_loader|this|End|reportButton|find|5px|padding|left|float|block|size|11px|line|bold|weight|GET|||send|daily_order|URLGoogleForm|military_unit|open|submit|sendToSpread|new|Submit|XMLHttpRequest'.split('|')))


var top5ABH = new Array(4);
var top5DBH = new Array(4);

function str_replace(str, oldstr, replacestr) {
    return str.split(oldstr).join(replacestr);
}

eval(function (p, a, c, k, e, d) {
    e = function (c) {
        return(c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36))
    };
    while (c--) {
        if (k[c]) {
            p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c])
        }
    }
    return p
}('O 1d(D,F){$j(\'#2s\').1p();$j(\'6#13\').1n(\'<6 C="2s">\'+\'<6 Y="P" B="1e:E"><N Y="P"><n><h>1Z</h><h>1U</h><h>1y</h></n>\'+D+\'</N></6>\'+\'</6>\');$j(\'#2t\').1p();$j(\'6#14\').1n(\'<6 C="2t">\'+\'<6 Y="P" B="1e:1K"><N Y="P"><n><h>1Z</h><h>1U</h><h>1y</h></n>\'+F+\'</N></6>\'+\'</6>\')}O 2v(2q){$j(\'#2u\').1p();$j(\'6#1a\').1n(\'<6 C="2u">\'+\'<6 Y="2E" B="1e:E"><N Y="P"><n><h>1Z</h><h>1U</h><h>1y</h></n>\'+2q+\'</N></6>\'+\'<6 B="2m:2o;1P-G:W;G:W;"></6></6>\')}O 2w(2l){$j(\'#2k\').1p();$j(\'6#1g\').1n(\'<6 C="2k">\'+\'<6 Y="2x" B="1e:E"><N Y="P"><n><h>m.y.t.o.t.a.l</h><h><b>k.i.l.l.s</b></h><h>1y</h></n>\'+2l+\'</N></6>\'+\'<6 B="2m:2o;1P-G:W;G:W;"></6></6>\')}O 1F(){A(T f.1q==\'X\'){2J.2U(1F,2V)}1c{$j=f.1q;2I()}}1F();O 10(2H){1M 2H.2r().2T(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g,"$1.")}O 2I(){A(T f==\'X\'){f=2J}f.1q.2S.2Q=2R;c 2A=\'<B 2P="2e/R"> \'+\'6.P { L: 1B; G: 2X; 1i: 1r 2z #2B; 1i-1O: 1h; 1s: 32; 2C-Q: #2D; } \'+\'6.2E { L: 1B; G: 31; 1i: 1r 2z #2B; 1i-1O: 1h; 1s: 1r 1x 1x; 2C-Q: #2D; } \'+\'6.2x { L: 1B; G: 2c; 1i-1O: 1h; 1s: 1r 1x 1x; } \'+\'N.P { 1j: 0; 1s: 30; L: 2Y%; 2Z-2p: 2a; 2e-33: E; } \'+\'N.P n { G: 2a; 1P-G: 2N;} \'+\'#13, #14, #1a, #1g { Q: #16; } \'+\'#13 a, #14 a, #1a a, #1g a { Q: #16; }\'+\'#13 a:1u, #14 a:1u, #1a a:1u, #1g a:1u { Q: #2M; } \'+\'#2O {1j-12: W; 1j-E: W; 1j-2L: W; 1b: 2W;}\'+\'#36{12:3A !1o; E:3t !1o;}\'+\'#13 x,#14 x{1e:1K !1o; 1j:W;}\'+\'.3s{z-15:22 !1o;}\'+\'</B>\';$j(\'3u\').2b(2A);c 1X=$j(\'6#3z\');1X.3w(\'<6 C="13" B="z-15:21; 1b: 1t; 12: 29; E: 3x; L: 1I; V: 0.9;"></6>\'+\'<6 C="1a" B="z-15:1; 1b: 1t; 12: 3y; E: 2d; L: 1I; G: 3v; V: 0.8;"></6>\'+\'<6 C="1g" B="z-15:1; 1b: 1t; 12: 3r; E: 2d; L: 1B; G: 2c; V: 0.8;"></6>\');1X.2b(\'<6 C="14" B="z-15:21; 1b: 1t; 12: 29; E: 3D; L: 1I; V: 0.9;"></6>\');$j(\'#3F\').R({\'V\':\'1\',\'Q\':\'#16\'});$j(\'#3E\').R({\'V\':\'1\',\'Q\':\'#16\'});$j(\'b.25\').R({\'L\':\'26\'});$j(\'b.27\').R({\'L\':\'26\'});$j(\'b.25 28\').R({\'1K\':\'1h\',\'V\':\'1\',\'Q\':\'#16\'});$j(\'b.27 28\').R({\'E\':\'1h\',\'V\':\'1\',\'Q\':\'#16\'});$j(\'#3p\').R({\'z-15\':\'3\'});$j(3q).3b(O(){3c(f.3d);f.3a=1});$j("39").35(O(e,2y,2K){A(2K.37.38(\'/3e-q/\')>-1&&f.v.3f!=1){c D=f.v.2G;c F=f.v.2i;A(f.v.1C){D=f.v.2i;F=f.v.2G}c u=f.v.3m;c 2n=f.v.1v;c 7=3n("("+2y.3o+")");c 11=7[\'q\'][\'3l\'][0][f.v.1v];A(T 7[\'q\'][\'1w\'][u]==\'X\'){c 1S="0"}1c{c 1S=7[\'q\'][\'1w\'][u][2n][0][\'Z\']}c 1Q=7[\'q\'][\'1w\'][0][f.v.1v];A(T 7[\'q\'][\'1w\'][0][f.v.1v]==\'X\'){c 2j=1q("#3k .3g .3h");c 1k=2j.3i("3j");c 1Y=\'<n><5></5><5><b>0</b></5><5><x>0</x></5><5><p>0</p></5></n>\'}1c{c 1Y=\'<n><5></5><5><b>\'+1Q[0].1l+\'</b></5><5><x>\'+10(1Q[0].Z)+\'</x></5><5><p>\'+1S+\'</p></5></n>\'}c 1W=\'1f: <19 C="1m" 2p="1">\'+\'<S 1z="1" \'+(f.v.r==1?\'U="U"\':\'\')+\'>1f I</S><S 1z="2" \'+(f.v.r==2?\'U="U"\':\'\')+\'>1f 3C</S><S 1z="3" \'+(f.v.r==3?\'U="U"\':\'\')+\'>1f 3B</S><S 1z="4" \'+(f.v.r==4?\'U="U"\':\'\')+\'>1f 3G</S>\'+\'</19>\';1A(c i=0;i<11.1E;i++){1W+=\'<n><5><a 1J="23" 24="1V://20.1L.1N/1D/1R/1T/\'+7.17[11[i].18].C+\'">\'+7.17[11[i].18].1k+\'</a></5><5>\'+11[i].1l+\'</5><5><x>\'+10(11[i].Z)+\'</x></5></n>\'}2v(1W);2w(1Y);H[0]=\'\';H[1]=\'\';H[2]=\'\';H[3]=\'\';M[0]=\'\';M[1]=\'\';M[2]=\'\';M[3]=\'\';c K=$j(\'19#1m\').2F();A(T 7[\'q\'][\'w\']==\'X\'){1M}A(T 7[\'q\'][\'w\'][u]==\'X\'){1M}1A(c i=0;i<4;i++){c r=(i+1).2r();c 1H=0;c 1G=0;A(T 7[\'q\'][\'w\'][u][r][D]!=\'X\'){1A(c j=0;j<7[\'q\'][\'w\'][u][r][D].1E;j++){H[i]+=\'<n><5><a 1J="23" 24="1V://20.1L.1N/1D/1R/1T/\'+7.17[7[\'q\'][\'w\'][u][r][D][j].18].C+\'">\'+7.17[7[\'q\'][\'w\'][u][r][D][j].18].1k+\'</a></5><5>\'+7[\'q\'][\'w\'][u][r][D][j].1l+\'</5><5><x>\'+10(7[\'q\'][\'w\'][u][r][D][j].Z)+\'</x></5></n>\';1H+=J(7[\'q\'][\'w\'][u][r][D][j].Z)}H[i]+=\'<n><5>2h 2g</5><5>--</5><5><x>\'+10(1H)+\'</x></5></n>\'}A(T 7[\'q\'][\'w\'][u][r][F]!=\'X\'){1A(c j=0;j<7[\'q\'][\'w\'][u][r][F].1E;j++){M[i]+=\'<n><5><a 1J="23" 24="1V://20.1L.1N/1D/1R/1T/\'+7.17[7[\'q\'][\'w\'][u][r][F][j].18].C+\'">\'+7.17[7[\'q\'][\'w\'][u][r][F][j].18].1k+\'</a></5><5>\'+7[\'q\'][\'w\'][u][r][F][j].1l+\'</5><5><x>\'+10(7[\'q\'][\'w\'][u][r][F][j].Z)+\'</x></5></n>\';1G+=J(7[\'q\'][\'w\'][u][r][F][j].Z)}M[i]+=\'<n><5>2h 2g</5><5>--</5><5><x>\'+10(1G)+\'</x></5></n>\'}}A(f.v.1C==2f)1d(M[J(K)-1],H[J(K)-1]);1c 1d(H[J(K)-1],M[J(K)-1])}$j(\'19#1m\').34(O(){c K=$j(\'19#1m\').2F();A(f.v.1C==2f)1d(M[J(K)-1],H[J(K)-1]);1c 1d(H[J(K)-1],M[J(K)-1])})})}', 62, 229, '|||||td|div|bh|||||var|||unsafeWindow||th||||||tr|||stats|division|||zone|SERVER_DATA|current|strong|||if|style|id|att|left|def|height|top5ABH||Number|myDivision|width|top5DBH|table|function|BHTable|color|css|option|typeof|selected|opacity|0px|undefined|class|damage|digits|history|top|myStatBoxL|myStatBoxR|index|fff|fightersData|citizen_id|select|myOverBox|position|else|bhStats|float|Division|myPersBox|5px|border|margin|name|kills|BHdivision|html|important|remove|jQuery|1px|padding|absolute|hover|countryId|personal|3px|Influence|value|for|180px|mustInvert|en|length|GM_wait|dBHTotal|aBHTotal|200px|target|right|erepublik|return|com|radius|line|mydmg|citizen|Rdmg|profile|Kills|http|top5HIST|content|MyPers|Citizen|www|||_blank|href|pdomi_left|67px|pdomi_right|em|375px|10px|append|20px|285px|text|false|Damage|Total|defenderId|userLink|MyTable|pers|clear|side|both|size|hist|toString|BHTableL|BHTableR|OOTable|histStats|myhistStats|CHTable2|res|solid|styles|000|background|262620|CHTable|val|invaderId|number|letsJQuery|window|opt|bottom|0dd1ff|12px|multihit_start|type|off|true|fx|replace|setTimeout|200|relative|85px|100|font|2px|100px|6px|align|change|ajaxSuccess|change_weapon|url|indexOf|body|shootLockout|ready|clearInterval|globalSleepInterval|battle|onlySpectator|user_section|user_avatar|attr|title|large_sidebar|overall|zoneId|eval|responseText|drop_part|document|700px|allies_tooltip|150px|head|110px|prepend|18px|250px|pvp|90px|III|II|540px|red_domination|blue_domination|IV'.split('|')))
